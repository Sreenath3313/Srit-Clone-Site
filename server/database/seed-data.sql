-- ============================================
-- College ERP System - Sample/Seed Data
-- PostgreSQL with Supabase
-- ============================================
-- This file provides comprehensive test data for the College ERP system
-- Run this after setting up the schema.sql

-- ============================================
-- IMPORTANT: User Account Creation
-- ============================================
-- Before running this script, you need to create user accounts in Supabase Auth
-- for all faculty and students. This script only creates the profile records.
--
-- For each user, create in Supabase Auth Dashboard:
-- 1. Email: as specified below
-- 2. Password: faculty123 (for faculty) or student123 (for students)
--    ⚠️ SECURITY WARNING: These are default test passwords.
--    ⚠️ For production: Use strong random passwords and require password change on first login.
-- 3. User metadata: { "role": "faculty" } or { "role": "student" }
-- 4. Auto confirm: Yes
--
-- After creating users, note down their user_id (UUID) and update this script
-- OR use the admin API endpoints to create them programmatically

-- ============================================
-- DEPARTMENTS
-- ============================================
INSERT INTO departments (id, name, code) VALUES
('d1111111-1111-1111-1111-111111111111', 'Computer Science Engineering', 'CSE'),
('d2222222-2222-2222-2222-222222222222', 'Electronics and Communication Engineering', 'ECE'),
('d3333333-3333-3333-3333-333333333333', 'Mechanical Engineering', 'MECH'),
('d4444444-4444-4444-4444-444444444444', 'Civil Engineering', 'CIVIL')
ON CONFLICT (code) DO NOTHING;

-- ============================================
-- SECTIONS (8 sections per department: Years 1-4, Sections A & B)
-- ============================================
-- CSE Sections
INSERT INTO sections (id, department_id, year, name) VALUES
('s1111111-1111-1111-1111-111111111111', 'd1111111-1111-1111-1111-111111111111', 1, 'A'),
('s1111111-1111-1111-1111-111111111112', 'd1111111-1111-1111-1111-111111111111', 1, 'B'),
('s1111111-1111-1111-1111-111111111113', 'd1111111-1111-1111-1111-111111111111', 2, 'A'),
('s1111111-1111-1111-1111-111111111114', 'd1111111-1111-1111-1111-111111111111', 2, 'B'),
('s1111111-1111-1111-1111-111111111115', 'd1111111-1111-1111-1111-111111111111', 3, 'A'),
('s1111111-1111-1111-1111-111111111116', 'd1111111-1111-1111-1111-111111111111', 3, 'B'),
('s1111111-1111-1111-1111-111111111117', 'd1111111-1111-1111-1111-111111111111', 4, 'A'),
('s1111111-1111-1111-1111-111111111118', 'd1111111-1111-1111-1111-111111111111', 4, 'B')
ON CONFLICT (department_id, year, name) DO NOTHING;

-- ECE Sections
INSERT INTO sections (id, department_id, year, name) VALUES
('s2222222-2222-2222-2222-222222222221', 'd2222222-2222-2222-2222-222222222222', 1, 'A'),
('s2222222-2222-2222-2222-222222222222', 'd2222222-2222-2222-2222-222222222222', 1, 'B'),
('s2222222-2222-2222-2222-222222222223', 'd2222222-2222-2222-2222-222222222222', 2, 'A'),
('s2222222-2222-2222-2222-222222222224', 'd2222222-2222-2222-2222-222222222222', 2, 'B'),
('s2222222-2222-2222-2222-222222222225', 'd2222222-2222-2222-2222-222222222222', 3, 'A'),
('s2222222-2222-2222-2222-222222222226', 'd2222222-2222-2222-2222-222222222222', 3, 'B'),
('s2222222-2222-2222-2222-222222222227', 'd2222222-2222-2222-2222-222222222222', 4, 'A'),
('s2222222-2222-2222-2222-222222222228', 'd2222222-2222-2222-2222-222222222222', 4, 'B')
ON CONFLICT (department_id, year, name) DO NOTHING;

-- MECH Sections
INSERT INTO sections (id, department_id, year, name) VALUES
('s3333333-3333-3333-3333-333333333331', 'd3333333-3333-3333-3333-333333333333', 1, 'A'),
('s3333333-3333-3333-3333-333333333332', 'd3333333-3333-3333-3333-333333333333', 1, 'B'),
('s3333333-3333-3333-3333-333333333333', 'd3333333-3333-3333-3333-333333333333', 2, 'A'),
('s3333333-3333-3333-3333-333333333334', 'd3333333-3333-3333-3333-333333333333', 2, 'B'),
('s3333333-3333-3333-3333-333333333335', 'd3333333-3333-3333-3333-333333333333', 3, 'A'),
('s3333333-3333-3333-3333-333333333336', 'd3333333-3333-3333-3333-333333333333', 3, 'B'),
('s3333333-3333-3333-3333-333333333337', 'd3333333-3333-3333-3333-333333333333', 4, 'A'),
('s3333333-3333-3333-3333-333333333338', 'd3333333-3333-3333-3333-333333333333', 4, 'B')
ON CONFLICT (department_id, year, name) DO NOTHING;

-- CIVIL Sections
INSERT INTO sections (id, department_id, year, name) VALUES
('s4444444-4444-4444-4444-444444444441', 'd4444444-4444-4444-4444-444444444444', 1, 'A'),
('s4444444-4444-4444-4444-444444444442', 'd4444444-4444-4444-4444-444444444444', 1, 'B'),
('s4444444-4444-4444-4444-444444444443', 'd4444444-4444-4444-4444-444444444444', 2, 'A'),
('s4444444-4444-4444-4444-444444444444', 'd4444444-4444-4444-4444-444444444444', 2, 'B'),
('s4444444-4444-4444-4444-444444444445', 'd4444444-4444-4444-4444-444444444444', 3, 'A'),
('s4444444-4444-4444-4444-444444444446', 'd4444444-4444-4444-4444-444444444444', 3, 'B'),
('s4444444-4444-4444-4444-444444444447', 'd4444444-4444-4444-4444-444444444444', 4, 'A'),
('s4444444-4444-4444-4444-444444444448', 'd4444444-4444-4444-4444-444444444444', 4, 'B')
ON CONFLICT (department_id, year, name) DO NOTHING;

-- ============================================
-- SUBJECTS (Sample subjects for each department)
-- ============================================
-- CSE Subjects
INSERT INTO subjects (id, department_id, semester, name, code) VALUES
('sub11111-1111-1111-1111-111111111111', 'd1111111-1111-1111-1111-111111111111', 1, 'Programming in C', 'CS101'),
('sub11111-1111-1111-1111-111111111112', 'd1111111-1111-1111-1111-111111111111', 2, 'Data Structures', 'CS201'),
('sub11111-1111-1111-1111-111111111113', 'd1111111-1111-1111-1111-111111111111', 3, 'Database Management Systems', 'CS301'),
('sub11111-1111-1111-1111-111111111114', 'd1111111-1111-1111-1111-111111111111', 4, 'Operating Systems', 'CS401'),
('sub11111-1111-1111-1111-111111111115', 'd1111111-1111-1111-1111-111111111111', 5, 'Computer Networks', 'CS501'),
('sub11111-1111-1111-1111-111111111116', 'd1111111-1111-1111-1111-111111111111', 6, 'Machine Learning', 'CS601'),
('sub11111-1111-1111-1111-111111111117', 'd1111111-1111-1111-1111-111111111111', 7, 'Software Engineering', 'CS701'),
('sub11111-1111-1111-1111-111111111118', 'd1111111-1111-1111-1111-111111111111', 8, 'Cloud Computing', 'CS801')
ON CONFLICT (department_id, code) DO NOTHING;

-- ECE Subjects
INSERT INTO subjects (id, department_id, semester, name, code) VALUES
('sub22222-2222-2222-2222-222222222221', 'd2222222-2222-2222-2222-222222222222', 1, 'Basic Electronics', 'EC101'),
('sub22222-2222-2222-2222-222222222222', 'd2222222-2222-2222-2222-222222222222', 2, 'Digital Electronics', 'EC201'),
('sub22222-2222-2222-2222-222222222223', 'd2222222-2222-2222-2222-222222222222', 3, 'Electronic Circuits', 'EC301'),
('sub22222-2222-2222-2222-222222222224', 'd2222222-2222-2222-2222-222222222222', 4, 'Microprocessors', 'EC401'),
('sub22222-2222-2222-2222-222222222225', 'd2222222-2222-2222-2222-222222222222', 5, 'Communication Systems', 'EC501'),
('sub22222-2222-2222-2222-222222222226', 'd2222222-2222-2222-2222-222222222222', 6, 'VLSI Design', 'EC601')
ON CONFLICT (department_id, code) DO NOTHING;

-- MECH Subjects
INSERT INTO subjects (id, department_id, semester, name, code) VALUES
('sub33333-3333-3333-3333-333333333331', 'd3333333-3333-3333-3333-333333333333', 1, 'Engineering Mechanics', 'ME101'),
('sub33333-3333-3333-3333-333333333332', 'd3333333-3333-3333-3333-333333333333', 2, 'Thermodynamics', 'ME201'),
('sub33333-3333-3333-3333-333333333333', 'd3333333-3333-3333-3333-333333333333', 3, 'Fluid Mechanics', 'ME301'),
('sub33333-3333-3333-3333-333333333334', 'd3333333-3333-3333-3333-333333333333', 4, 'Manufacturing Processes', 'ME401'),
('sub33333-3333-3333-3333-333333333335', 'd3333333-3333-3333-3333-333333333333', 5, 'Machine Design', 'ME501'),
('sub33333-3333-3333-3333-333333333336', 'd3333333-3333-3333-3333-333333333333', 6, 'Heat Transfer', 'ME601')
ON CONFLICT (department_id, code) DO NOTHING;

-- CIVIL Subjects
INSERT INTO subjects (id, department_id, semester, name, code) VALUES
('sub44444-4444-4444-4444-444444444441', 'd4444444-4444-4444-4444-444444444444', 1, 'Engineering Drawing', 'CE101'),
('sub44444-4444-4444-4444-444444444442', 'd4444444-4444-4444-4444-444444444444', 2, 'Surveying', 'CE201'),
('sub44444-4444-4444-4444-444444444443', 'd4444444-4444-4444-4444-444444444444', 3, 'Structural Analysis', 'CE301'),
('sub44444-4444-4444-4444-444444444444', 'd4444444-4444-4444-4444-444444444444', 4, 'Concrete Technology', 'CE401'),
('sub44444-4444-4444-4444-444444444445', 'd4444444-4444-4444-4444-444444444444', 5, 'Geotechnical Engineering', 'CE501'),
('sub44444-4444-4444-4444-444444444446', 'd4444444-4444-4444-4444-444444444444', 6, 'Transportation Engineering', 'CE601')
ON CONFLICT (department_id, code) DO NOTHING;

-- ============================================
-- FACULTY (Placeholder user_id - replace with actual after creating in Supabase Auth)
-- ============================================
-- IMPORTANT: These user_ids are placeholders. You must:
-- 1. Create users in Supabase Auth Dashboard with emails: lakshmi.devi@college.edu, rajesh.kumar@college.edu, etc.
-- 2. Set password to "faculty123" for all
-- 3. Set user_metadata: { "role": "faculty", "name": "Prof. Lakshmi Devi" }
-- 4. Copy their actual user_id and update these INSERT statements

-- For now, using placeholder UUIDs - REPLACE THESE AFTER CREATING ACTUAL USERS
INSERT INTO faculty (id, user_id, employee_id, name, department_id) VALUES
('f1111111-1111-1111-1111-111111111111', 'u0000001-0000-0000-0000-000000000001', 'FAC001', 'Prof. Lakshmi Devi', 'd1111111-1111-1111-1111-111111111111'),
('f2222222-2222-2222-2222-222222222222', 'u0000002-0000-0000-0000-000000000002', 'FAC002', 'Dr. Rajesh Kumar', 'd1111111-1111-1111-1111-111111111111'),
('f3333333-3333-3333-3333-333333333333', 'u0000003-0000-0000-0000-000000000003', 'FAC003', 'Prof. Arun Sharma', 'd2222222-2222-2222-2222-222222222222'),
('f4444444-4444-4444-4444-444444444444', 'u0000004-0000-0000-0000-000000000004', 'FAC004', 'Dr. Priya Reddy', 'd3333333-3333-3333-3333-333333333333'),
('f5555555-5555-5555-5555-555555555555', 'u0000005-0000-0000-0000-000000000005', 'FAC005', 'Prof. Sneha Patel', 'd4444444-4444-4444-4444-444444444444'),
('f6666666-6666-6666-6666-666666666666', 'u0000006-0000-0000-0000-000000000006', 'FAC006', 'Dr. Vijay Singh', 'd1111111-1111-1111-1111-111111111111'),
('f7777777-7777-7777-7777-777777777777', 'u0000007-0000-0000-0000-000000000007', 'FAC007', 'Prof. Meera Joshi', 'd2222222-2222-2222-2222-222222222222'),
('f8888888-8888-8888-8888-888888888888', 'u0000008-0000-0000-0000-000000000008', 'FAC008', 'Dr. Kiran Kumar', 'd1111111-1111-1111-1111-111111111111'),
('f9999999-9999-9999-9999-999999999999', 'u0000009-0000-0000-0000-000000000009', 'FAC009', 'Prof. Anita Desai', 'd3333333-3333-3333-3333-333333333333'),
('faaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'u000000a-0000-0000-0000-00000000000a', 'FAC010', 'Dr. Rahul Verma', 'd4444444-4444-4444-4444-444444444444')
ON CONFLICT (employee_id) DO NOTHING;

-- ============================================
-- STUDENTS (Sample 10 students for CSE-3A section)
-- ============================================
-- IMPORTANT: Same as faculty - create user accounts first in Supabase Auth
-- Email format: rollno@student.college.edu (e.g., 20cs101@student.college.edu)
-- Password: student123
-- User metadata: { "role": "student", "name": "Student Name" }

INSERT INTO students (id, user_id, roll_no, name, section_id, admission_year) VALUES
('st111111-1111-1111-1111-111111111111', 'u0000101-0000-0000-0000-000000000101', '20CS101', 'Arun Sharma', 's1111111-1111-1111-1111-111111111115', 2020),
('st111111-1111-1111-1111-111111111112', 'u0000102-0000-0000-0000-000000000102', '20CS102', 'Priya Reddy', 's1111111-1111-1111-1111-111111111115', 2020),
('st111111-1111-1111-1111-111111111113', 'u0000103-0000-0000-0000-000000000103', '20CS103', 'Rahul Kumar', 's1111111-1111-1111-1111-111111111115', 2020),
('st111111-1111-1111-1111-111111111114', 'u0000104-0000-0000-0000-000000000104', '20CS104', 'Sneha Devi', 's1111111-1111-1111-1111-111111111115', 2020),
('st111111-1111-1111-1111-111111111115', 'u0000105-0000-0000-0000-000000000105', '20CS105', 'Vijay Singh', 's1111111-1111-1111-1111-111111111115', 2020),
('st111111-1111-1111-1111-111111111116', 'u0000106-0000-0000-0000-000000000106', '20CS106', 'Meera Patel', 's1111111-1111-1111-1111-111111111115', 2020),
('st111111-1111-1111-1111-111111111117', 'u0000107-0000-0000-0000-000000000107', '20CS107', 'Kiran Joshi', 's1111111-1111-1111-1111-111111111115', 2020),
('st111111-1111-1111-1111-111111111118', 'u0000108-0000-0000-0000-000000000108', '20CS108', 'Anita Verma', 's1111111-1111-1111-1111-111111111115', 2020),
('st111111-1111-1111-1111-111111111119', 'u0000109-0000-0000-0000-000000000109', '20CS109', 'Ravi Shankar', 's1111111-1111-1111-1111-111111111115', 2020),
('st111111-1111-1111-1111-11111111111a', 'u000010a-0000-0000-0000-00000000010a', '20CS110', 'Deepika Nair', 's1111111-1111-1111-1111-111111111115', 2020)
ON CONFLICT (roll_no) DO NOTHING;

-- ============================================
-- TIMETABLE (Assign faculty to sections)
-- ============================================
-- Assigning Prof. Lakshmi Devi to Machine Learning for CSE-3A
INSERT INTO timetable (id, section_id, subject_id, faculty_id, day, period) VALUES
('tt111111-1111-1111-1111-111111111111', 's1111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111116', 'f1111111-1111-1111-1111-111111111111', 'Monday', 1),
('tt111111-1111-1111-1111-111111111112', 's1111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111116', 'f1111111-1111-1111-1111-111111111111', 'Wednesday', 2),
('tt111111-1111-1111-1111-111111111113', 's1111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111116', 'f1111111-1111-1111-1111-111111111111', 'Friday', 3)
ON CONFLICT (section_id, day, period) DO NOTHING;

-- Assigning Dr. Rajesh Kumar to Data Structures for CSE-3A
INSERT INTO timetable (id, section_id, subject_id, faculty_id, day, period) VALUES
('tt222222-2222-2222-2222-222222222221', 's1111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111112', 'f2222222-2222-2222-2222-222222222222', 'Monday', 2),
('tt222222-2222-2222-2222-222222222222', 's1111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111112', 'f2222222-2222-2222-2222-222222222222', 'Tuesday', 1),
('tt222222-2222-2222-2222-222222222223', 's1111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111112', 'f2222222-2222-2222-2222-222222222222', 'Thursday', 2)
ON CONFLICT (section_id, day, period) DO NOTHING;

-- Assigning Dr. Kiran Kumar to Computer Networks for CSE-3A
INSERT INTO timetable (id, section_id, subject_id, faculty_id, day, period) VALUES
('tt888888-8888-8888-8888-888888888881', 's1111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111115', 'f8888888-8888-8888-8888-888888888888', 'Tuesday', 3),
('tt888888-8888-8888-8888-888888888882', 's1111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111115', 'f8888888-8888-8888-8888-888888888888', 'Wednesday', 1),
('tt888888-8888-8888-8888-888888888883', 's1111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111115', 'f8888888-8888-8888-8888-888888888888', 'Friday', 2)
ON CONFLICT (section_id, day, period) DO NOTHING;

-- ============================================
-- SAMPLE ATTENDANCE RECORDS
-- ============================================
-- Add some attendance records for Machine Learning class (last week)
INSERT INTO attendance (student_id, subject_id, date, present) VALUES
-- Monday class
('st111111-1111-1111-1111-111111111111', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', true),
('st111111-1111-1111-1111-111111111112', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', true),
('st111111-1111-1111-1111-111111111113', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', true),
('st111111-1111-1111-1111-111111111114', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', true),
('st111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', true),
('st111111-1111-1111-1111-111111111116', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', true),
('st111111-1111-1111-1111-111111111117', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', true),
('st111111-1111-1111-1111-111111111118', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', false),
('st111111-1111-1111-1111-111111111119', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', false),
('st111111-1111-1111-1111-11111111111a', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '7 days', false),
-- Wednesday class
('st111111-1111-1111-1111-111111111111', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', true),
('st111111-1111-1111-1111-111111111112', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', true),
('st111111-1111-1111-1111-111111111113', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', false),
('st111111-1111-1111-1111-111111111114', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', true),
('st111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', true),
('st111111-1111-1111-1111-111111111116', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', true),
('st111111-1111-1111-1111-111111111117', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', true),
('st111111-1111-1111-1111-111111111118', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', true),
('st111111-1111-1111-1111-111111111119', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', true),
('st111111-1111-1111-1111-11111111111a', 'sub11111-1111-1111-1111-111111111116', CURRENT_DATE - INTERVAL '5 days', true)
ON CONFLICT (student_id, subject_id, date) DO NOTHING;

-- ============================================
-- SAMPLE MARKS RECORDS
-- ============================================
-- Add marks for Machine Learning subject
INSERT INTO marks (student_id, subject_id, internal1, internal2, external) VALUES
('st111111-1111-1111-1111-111111111111', 'sub11111-1111-1111-1111-111111111116', 18, 19, 85),
('st111111-1111-1111-1111-111111111112', 'sub11111-1111-1111-1111-111111111116', 17, 18, 82),
('st111111-1111-1111-1111-111111111113', 'sub11111-1111-1111-1111-111111111116', 19, 20, 90),
('st111111-1111-1111-1111-111111111114', 'sub11111-1111-1111-1111-111111111116', 16, 17, 78),
('st111111-1111-1111-1111-111111111115', 'sub11111-1111-1111-1111-111111111116', 18, 19, 88),
('st111111-1111-1111-1111-111111111116', 'sub11111-1111-1111-1111-111111111116', 17, 18, 80),
('st111111-1111-1111-1111-111111111117', 'sub11111-1111-1111-1111-111111111116', 19, 19, 86),
('st111111-1111-1111-1111-111111111118', 'sub11111-1111-1111-1111-111111111116', 15, 16, 72),
('st111111-1111-1111-1111-111111111119', 'sub11111-1111-1111-1111-111111111116', 18, 17, 84),
('st111111-1111-1111-1111-11111111111a', 'sub11111-1111-1111-1111-111111111116', 16, 18, 79)
ON CONFLICT (student_id, subject_id) DO NOTHING;

-- ============================================
-- COMPLETION MESSAGE
-- ============================================
-- Display summary
DO $$
BEGIN
  RAISE NOTICE '========================================';
  RAISE NOTICE 'Sample Data Loaded Successfully!';
  RAISE NOTICE '========================================';
  RAISE NOTICE 'Departments: 4 (CSE, ECE, MECH, CIVIL)';
  RAISE NOTICE 'Sections: 32 (8 per department)';
  RAISE NOTICE 'Subjects: 28 total';
  RAISE NOTICE 'Faculty: 10 (placeholder user_ids)';
  RAISE NOTICE 'Students: 10 in CSE-3A section';
  RAISE NOTICE 'Timetable: 9 class assignments';
  RAISE NOTICE 'Attendance: 20 sample records';
  RAISE NOTICE 'Marks: 10 sample records';
  RAISE NOTICE '========================================';
  RAISE NOTICE 'IMPORTANT: Update user_ids after creating';
  RAISE NOTICE 'actual user accounts in Supabase Auth!';
  RAISE NOTICE '========================================';
END $$;
